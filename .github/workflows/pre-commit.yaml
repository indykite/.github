#
# DO NOT EDIT!!!
# Managed by GitHub Action and synced from a private repo!
#
---
name: SAST Linting
on:
  pull_request:
    branches: ["dev", "develop", "main", "master"]
  push:
    branches: ["dev", "develop", "main", "master"]
  schedule:
    - cron: "15 0 1 * *"
permissions:
  contents: write
  pull-requests: read
jobs:
  commitlint:
    name: commitlint
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - name: commitlint
        uses: indykite/ops-common/.github/actions/commitlint@master
        with:
          is_strict: "true"
          release_bot: "${{ vars.RELEASE_BOT }}"
  pre-commit:
    name: pre-commit
    runs-on: ubuntu-latest
    steps:
      - name: pre-commit
        uses: indykite/ops-common/.github/actions/pre-commit@master
        with:
          github_token: ${{ secrets.INDYKITEONE_PAT }}
          checkout_fetch_master: "${{ vars.GH_CHECKOUT_FETCH_MASTER }}"
          action_timeout: "${{ vars.PRE_COMMIT_ACTION_TIMEOUT != null && vars.PRE_COMMIT_ACTION_TIMEOUT || 10 }}"
          pre_commit_skip: >-
            commitlint,trivy,trivy-conf,trivy-filesystem
            ${{ vars.PRE_COMMIT_SKIP != null && ',' || '' }}${{ vars.PRE_COMMIT_SKIP }}
            ${{ format('{0}', github.event_name != 'pull_request' && ',pre-commit-autoupdate,no-commit-to-branch' || '' ) }}
  trivy:
    name: trivy
    runs-on: ubuntu-latest
    steps:
      - name: trivy
        uses: indykite/ops-common/.github/actions/trivy@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
